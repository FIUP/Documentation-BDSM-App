% =================================================================================================
% File:			server_tier/processor.tex
% Description:	Definisce la sezione relativa al back-end dell'applicazione
% Created:		2015-04-07
% Author:		Cusinato Giacomo
% Email:		cusinato.giacomo@mashup-unipd.it
% =================================================================================================
% Modification History:
% Version		Modifier Date		Change											Author
% 0.0.1
% =================================================================================================

% CONTENUTO DEL CAPITOLO


\subsubsection{bdsm\_app::server::processor} % (fold)
\label{ssub:bdsm_app_server_processor}
[TO DO] (diagramma) \newline \newline

\begin{itemize}
  \item \textbf{Descrizione}: è il package che contiene le componenti che gestiscono le richieste in arrivo dal client grazie ai servizi REST definiti nel package \texttt{server::endpoints::api};
  \item \textbf{Padre}: server
  \item \textbf{Package contenuti}: server::processor::commands
  \item \textbf{Interazione con altri componenti}:
    \begin{itemize}
      \item server::miner
      \item server::endpoints
      \item srever::db
    \end{itemize}
\end{itemize}

  \paragraph{Classi} % (fold)

    \subparagraph{bdsm\_app::server::processor::RequestHandler} % (fold)
    \label{subp:bdsm_app_server_processor_requesthandler}
    \begin{itemize}
      \item \textbf{Descrizione}: è la classe che implementa il pattern Front Controller e si occupa di raccorgliere le richieste provenienti dal client. Implementa inoltre il pattern Singleton, per cui un'unica istanza di tale classa sarà vivrà nel sistema;
      \item \textbf{Utilizzo}: viene invocata dalle classi presenti nel package \texttt{server::endpoints::api} in seguito ad una chiamata ai servizi REST offerti dal sistema e trasferisce la richiesta alla classe \texttt{CommandDispatcher} che si occupera di invocare il relativo comando per soddisfare tale richiesta;
      \item \textbf{Relazioni con altre classi}:
        \begin{itemize}
          \item server::processor::CommandDispatcher
        \end{itemize}
      \end{itemize}
    % subparagraph bdsm_app_server_processor_requesthandler (end)

    \subparagraph{bdsm\_app::server::processor::CommandDispatcher} % (fold)
    \label{subp:bdsm_app_server_:processor_commanddispatcher}
    \begin{itemize}
      \item \textbf{Descrizione}: classe che implementa il pattern Command e si occopa di far confluire un determinata richiesta al relativo comando contenente la logica per soddisfarla;
      \item \textbf{Utilizzo}: contiene un dizionario che mappa tutte le tipologie di richieste al relativo comando che sarà invocato tramite il metodo \texttt{dispatch()}. Si occupa inoltre di ritornare al Front Controller il un dizionario contente un eventuale risposta per il client;
      \item \textbf{Relazioni con altre classi}:
        \begin{itemize}
          \item server::processor::commands::ICommand
        \end{itemize}
      \end{itemize}
    % subparagraph bdsm_app_server_processor_commanddispatcher (end)

    \subparagraph{bdsm\_app::server::processor::UpdateRecipeTask} % (fold)
    \label{subp:bdsm_app_server_processor_updaterecipetask}
    \begin{itemize}
      \item \textbf{Descrizione}: è la classe che riceve la notifica dal Cron (funzionalità integrata nella Google Cloud Platform) per aggiornare le Recipe memorizzate nel sistema interagendo con la classe \texttt{server::miner::MinerScheduler} a tale scopo;
      \item \textbf{Utilizzo}:si occupa di invocare il \texttt{MinerScheduler} avviando il processo di aggiornamento delle Recipe passando al modulo Miner la lista delle ricette da aggiornare;
      \item \textbf{Relazioni con altre classi}:
        \begin{itemize}
          \item server::miner::MinerScheduler
        \end{itemize}
    \end{itemize}
    % subparagraph bdsm_app::server_processor_updaterecipetask (end)


    \subsubsection{bdsm\_app::server::processor::commands} % (fold)
    \label{ssub:bdsm_app_server_processor_commands}
    [TO DO] (diagramma) \newline \newline

    \begin{itemize}
      \item \textbf{Descrizione}: contiene le classi ed i package che definiscono i diversi comandi conteneti la logica necessaria a soddisfare le varie richieste in arrivo dal client;
      \item \textbf{Padre}: server::processor
      \item \textbf{Package contenuti}:
        \begin{itemize}
          \item server::processor::recipe
          \item server::processor::requests
          \item server::processor::user
        \end{itemize}
      \item \textbf{Interazione con altri componenti}:
        \begin{itemize}
          \item server::db
        \end{itemize}
    \end{itemize}

      \paragraph{Classi} % (fold)

      \subparagraph{bdsm\_app::server::processor::commands::ICommand} % (fold)
      \label{subp:bdsm_app_server_processor_commands_icommand}
      \begin{itemize}
        \item \textbf{Descrizione}: rappresente un'intefaccia comune per tutti i comandi presenti nel package \texttt{server::commands} e figli;
        \item \textbf{Utilizzo}: espone un metodo \texttt{execute()}, i quale sarà implementato da tutti i comandi concreti;
      \end{itemize}
      % subparagraph bdsm_app::server_processor_abscommand (end)


      % ==============================
      % SERVER::COMMANDS::USER PACKAGE
      %
      \subsubsection{bdsm\_app::server::processor::commands::user} % (fold)
      \label{ssub:bdsm_app_server_processor_commands_user}
      [TO DO] (diagramma) \newline \newline

      \begin{itemize}
        \item \textbf{Descrizione}: contiene tutti i comandi relativi alla gestione degli utenti;
        \item \textbf{Padre}: server::processor::commands;
        \item \textbf{Interazione con altri componenti}:
          \begin{itemize}
            \item server::db
          \end{itemize}
      \end{itemize}

        \paragraph{Classi} % (fold)

        \subparagraph{bdsm\_app::server::processor::commands::user::AbsUserCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_user_absusercommand}
        \begin{itemize}
          \item \textbf{Descrizione}: rappresenta una classe comune a tutti i comandi relativi alla gestione degli utenti;
          \item \textbf{Utilizzo}: è stata rappresentata come classe in quanto potrà contentere uno o più metodi di utilità comuni a tutti i comandi relativi alla gestione degli utenti;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::ICommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::user::AddUserCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_user_addusercommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per aggiungere un nuovo utente al database;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per aggiungere un nuovo utente al database;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::user::AbsUserCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::user::GetUserCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_user_getusercommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per ricavare un determinato utente dal database;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per ricavare un determinato utente dal database;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::user::AbsUserCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::user::DeleteUserCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_user_deleteusercommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per rimuovere un determinato utente dal database;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per rimuovere un determinato utente dal database;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::user::AbsUserCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::user::EditUserCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_user_editusercommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per modificare i dati un determinato utente dal database;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per modificare i dati un determinato utente dal database;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::user::AbsUserCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::user::EditPermissionCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_user_editpermissioncommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per modificare i permessi di un determinato utente;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per modificare i permessi di un determinato utente;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::user::AbsUserCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::user::GetFavouritesCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_user_getfavouritescommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per ottenere le View preferite di un determinato utente;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per ottenere le View preferite di un determinato utente;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::user::AbsUserCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::user::DeleteFavouriteCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_user_deletefavouritecommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per rimovere un determinato preferito da un utente specifico;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per rimovere un determinato preferito da un utente specifico;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::user::AbsUserCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::user::AddFavouriteCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_user_addfavouritecommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per aggiungere un preferito ad un determinato utente;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per aggiungere un preferito ad un determinato utente;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::user::AbsUserCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)
      % subsection


      % ================================
      % SERVER::COMMANDS::RECIPE PACKAGE
      %
      \subsubsection{bdsm\_app::server::processor::commands::recipe} % (fold)
      \label{ssub:bdsm_app_server_processor_commands_recipe}
      [TO DO] (diagramma) \newline \newline

      \begin{itemize}
        \item \textbf{Descrizione}: contiene tutti i comandi relativi alla gestione delle Recipe;
        \item \textbf{Padre}: server::commands
        \item \textbf{Interazione con altri componenti}:
          \begin{itemize}
            \item server::db
          \end{itemize}
      \end{itemize}

        \paragraph{Classi} % (fold)

        \subparagraph{bdsm\_app::server::processor::commands::recipe::AbsRecipeCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_recipe_absrecipecommand}
        \begin{itemize}
          \item \textbf{Descrizione}: rappresenta una classe comune a tutti i comandi relativi alla gestione delle Recipe;
          \item \textbf{Utilizzo}: è stata rappresentata come classe in quanto potrà contentere uno o più metodi di utilità comuni a tutti i comandi relativi alla gestione delle Recipe;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::ICommand;
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::recipe::GetRecipeCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_recipe_getrecipecommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per ottenere una determinata Recipe dal database;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per ottenere una determinata Recipe dal database;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::recipe::AbsRecipeCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::recipe::AddRecipeCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_recipe_addrecipecommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per aggiungere una nuova Recipe al database;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per aggiungere una nuova Recipe al database;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::recipe::AbsRecipeCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::recipe::DeleteRecipeCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_recipe_deleterecipecommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per rimuovere una determinata Recipe dal database;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per rimuovere una determinata Recipe dal database;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::recipe::AbsRecipeCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::recipe::RateRecipeCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_recipe_raterecipecommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per aggiungere e modificare il rating ad un determinata Recipe;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per aggiungere e modificare il rating ad un determinata Recipe;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::recipe::AbsRecipeCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)


      % ================================
      % SERVER::COMMANDS::REQUESTS PACKAGE
      %
      \subsubsection{bdsm\_app::server::processor::commands::requests} % (fold)
      \label{ssub:bdsm_app_server_processor_commands_requests}
      [TO DO] (diagramma) \newline \newline

      \begin{itemize}
        \item \textbf{Descrizione}: contiene tutti i comandi relativi alla gestione delle richieste di aggiunta Recipe;
        \item \textbf{Padre}: server::processor::commands;
        \item \textbf{Interazione con altri componenti}:
          \begin{itemize}
            \item server::db
          \end{itemize}
      \end{itemize}

        \paragraph{Classi} % (fold)

        \subparagraph{bdsm\_app::server::processor::commands::requests::AbsRequestCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_requests_absrequestcommand}
        \begin{itemize}
          \item \textbf{Descrizione}: rappresenta una classe comune a tutti i comandi relativi alla gestione delle richieste di aggiunta Recipe;
          \item \textbf{Utilizzo}: è stata rappresentata come classe in quanto potrà contentere uno o più metodi di utilità comuni a tutti i comandi relativi alla gestione dellerichieste di aggiunta Recipe;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::ICommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::requests::GetRequestCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_requests_getrequestcommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per ottenere un determinata richiesta di aggiunta Recipe dal database;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per ottenere un determinata richiesta di aggiunta Recipe dal database;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::requests::AbsRequestCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::requests::AddRequestCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_requests_addrequestcommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per aggiungere una nuova richiesta di aggiunta Recipe al database;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per aggiungere una nuova richiesta di aggiunta Recipe al database;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::requests::AbsRequestCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::requests::GetRequestListCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_requests_getrequestlistcommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per ottenere la lista delle richieste di aggiunta Recipe presenti nel database;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per ottenere la lista delle richieste di aggiunta Recipe presenti nel database;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::requests::AbsRequestCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::requests::DeleteRequestCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_requests_deleterequestcommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per rimuovere una determinata richiesta di aggiunta Recipe dal database;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per rimuovere una determinata richiesta di aggiunta Recipe dal database;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::requests::AbsRequestCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::requests::GetMetricsListCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_requests_getmetricslistcommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per ottenere la lista delle metriche presenti in una determinata richiesta di aggiunta Recipe;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per ottenere la lista delle metriche presenti in una determinata richiesta di aggiunta Recipe;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::requests::AbsRequestCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)

        \subparagraph{bdsm\_app::server::processor::commands::requests::GetMetricDataCommand} % (fold)
        \label{subp:bdsm_app_server_processor_commands_requests_getmetricsdatacommand}
        \begin{itemize}
          \item \textbf{Descrizione}: definisce la logica per ottenere i dati associati ad una determinata metrica;
          \item \textbf{Utilizzo}: implementa il metodo \texttt{execute()} che conterrà la logica per ottenere i dati associati ad una determinata metrica;
          \item \textbf{Relazioni con altre classi}:
            \begin{itemize}
              \item server::processor::commands::requests::AbsRequestCommand
            \end{itemize}
        \end{itemize}
        % subparagraph (end)
    % subsubsection
  % subsubsection
% subsubsection
